<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>stm32f103c8t6最小系统板玩转arduino</title>
      <link href="/2018/11/25/stm32f103c8t6%E6%9C%80%E5%B0%8F%E7%B3%BB%E7%BB%9F%E6%9D%BF%E7%8E%A9%E8%BD%ACarduino/"/>
      <url>/2018/11/25/stm32f103c8t6%E6%9C%80%E5%B0%8F%E7%B3%BB%E7%BB%9F%E6%9D%BF%E7%8E%A9%E8%BD%ACarduino/</url>
      
        <content type="html"><![CDATA[<p>一、硬件：<br>淘宝搜索“stm32f103c8t6最小系统板”，实物如下图所示：</p><p><img src="\images\pasted-2.png" alt="upload successful"><br><a id="more"></a><br>二、软件：<br>2.1、从arduino官网<a href="https://www.arduino.cc" target="_blank" rel="noopener">https://www.arduino.cc</a> 下载Arduino IDE，我下载的是zip免安装版本，文件名：arduino-1.8.7-windows.zip；<br>2.2、从<a href="https://github.com/rogerclarkmelbourne/Arduino_STM32" target="_blank" rel="noopener">https://github.com/rogerclarkmelbourne/Arduino_STM32</a> 下载stm32的arduino硬件库，文件名：Arduino_STM32-master.zip；<br>2.3、从<a href="https://github.com/rogerclarkmelbourne/STM32duino-bootloader" target="_blank" rel="noopener">https://github.com/rogerclarkmelbourne/STM32duino-bootloader</a> 下载bootloader文件，文件名：STM32duino-bootloader-master.zip；<br>2.4、从<a href="https://developer.arm.com/open-source/gnu-toolchain/gnu-rm" target="_blank" rel="noopener">https://developer.arm.com/open-source/gnu-toolchain/gnu-rm</a> 下载GNU Arm Embedded Toolchain，文件名：gcc-arm-none-eabi-7-2018-q2-update-win32.zip<br>2.5、解压以上四个压缩包；<br>2.6、把Arduino_STM32-master文件夹改名为Arduino_STM32并移动到arduino-1.8.7\hardware目录下；<br>2.7、把gcc-arm-none-eabi-7-2018-q2-update-win32移动到arduino-1.8.7\hardware\Arduino_STM32\tools目录下；<br>2.8、在arduino-1.8.7\hardware\Arduino_STM32\STM32F1\platform.txt中添加目录定义，如下两行：<br>        runtime.hardware.path=./hardware/Arduino_STM32<br>        runtime.tools.arm-none-eabi-gcc.path=./hardware/Arduino_STM32/tools/gcc-arm-none-eabi-7-2018-q2-update-win32<br>2.9、把arduino-1.8.7\hardware\Arduino_STM32\tools\gcc-arm-none-eabi-7-2018-q2-update-win32\arm-none-eabi\include\sys\cdefs.h中的宏定义<strong>always_inline改为：<br>        //#define        </strong>always_inline        <strong>inline</strong> <strong>attribute</strong>((<strong>always_inline</strong>))</p><pre><code>#define        __always_inline        __attribute__((__always_inline__))</code></pre><p>2.10、运行arduino-1.8.7\hardware\Arduino_STM32\drivers\win\install_drivers.bat安装驱动，驱动包括Maple DFU driver和Maple Serial driver，<br>        其中Maple DFU driver用于更新程序，Maple Serial driver用于USB转串口。<br>三、操作：<br>3.1、使用串口或仿真器stlink烧录”STM32duino-bootloader-master.zip\STM32duino-bootloader-master\bootloader_only_binaries\generic_boot20_pc13.bin”文件到stm32f103c8t6最小系统板；<br>3.2、使用usb数据线直接连接stm32f103c8t6最小系统板的Micro USB接口，根据提示安装驱动；<br>3.3、运行arduino ide，文件\新建，并设置开发板，如下图所示：<br><img src="\images\pasted-3.png" alt="upload successful"><br>3.4、添加程序：</p><p>#include &lt;MapleFreeRTOS900.h&gt;</p><p>#define BOARD_LED_PIN PC13</p><p>static void vLEDFlashTask(void *pvParameters) {<br>    for (;;) {<br>        vTaskDelay(500);<br>        digitalWrite(BOARD_LED_PIN, HIGH);<br>        vTaskDelay(500);<br>        digitalWrite(BOARD_LED_PIN, LOW);<br>    }<br>}</p><p>static void vSerialTask(void *pvParameters) {<br>    for (;;) {<br>        Serial.println(“LED OFF”);<br>        while(!(digitalRead(BOARD_LED_PIN)));<br>        Serial.println(“LED ON”);<br>        while((digitalRead(BOARD_LED_PIN)));<br>    }<br>}</p><p>void setup() {<br>    // initialize the digital pin as an output:<br>    pinMode(BOARD_LED_PIN, OUTPUT);<br>    Serial.begin(9600);<br>    xTaskCreate(vLEDFlashTask,<br>                “Task1”,<br>                configMINIMAL_STACK_SIZE,<br>                NULL,<br>                tskIDLE_PRIORITY + 2,<br>                NULL);<br>    xTaskCreate(vSerialTask,<br>                “Task2”,<br>                configMINIMAL_STACK_SIZE,<br>                NULL,<br>                tskIDLE_PRIORITY + 2,<br>                NULL);<br>    vTaskStartScheduler();<br>}</p><p>void loop() {<br>    // Insert background code here<br>}<br>3.5、验证/编译并上传，运行效果如下：<br><img src="\images\pasted-4.png" alt="upload successful"></p>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>OpenOCD SWD调试stm32f0</title>
      <link href="/2018/11/25/OpenOCD-SWD%E8%B0%83%E8%AF%95stm32f0/"/>
      <url>/2018/11/25/OpenOCD-SWD%E8%B0%83%E8%AF%95stm32f0/</url>
      
        <content type="html"><![CDATA[<p><img src="\images\pasted-0.png" alt="upload successful"><br><a id="more"></a><br><img src="\images\pasted-1.png" alt="upload successful"></p>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>yum安装本地rpm包</title>
      <link href="/2018/10/28/yum%E5%AE%89%E8%A3%85%E6%9C%AC%E5%9C%B0rpm%E5%8C%85/"/>
      <url>/2018/10/28/yum%E5%AE%89%E8%A3%85%E6%9C%AC%E5%9C%B0rpm%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<p>yum localinstall ./google-chrome-stable_current_x86_64.rpm</p>]]></content>
      
      
      
    </entry>
    
  
  
</search>
